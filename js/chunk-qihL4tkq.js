import{b as e,c as l,o as a,e as t,f as o,F as s,y as r,m as u,D as n,s as c,r as d,a8 as i,w as p,h as v,B as m,C as b,z as f,n as C,H as w,E as x,k as h,j as g,a9 as y,aa as k,t as L}from"./chunk-Dfru-Ds3.js";import{a as V,u as P,i as _,e as T}from"./chunk-DMoODoeY.js";const U={class:"w-full h-auto"},S=["onClick"],z=V(e({__name:"PatternSetting",props:{rowCount:{type:Number,default:17},cardColor:{type:String,default:"#fff"},patternColor:{type:String,default:"#000"},patternList:{type:Array,default:()=>[]}},setup(e){const c=e,d=l((()=>c));return(e,l)=>(a(),t("div",U,[o("ul",{class:"pattern-list",style:n({gridTemplateColumns:"repeat("+d.value.rowCount+",1fr)"})},[(a(!0),t(s,null,r(7*d.value.rowCount,(e=>(a(),t("li",{onClick:u((l=>((e,l)=>{if(d.value.patternList.includes(l)){const e=d.value.patternList.indexOf(l);d.value.patternList.splice(e,1)}else d.value.patternList.push(l)})(0,e)),["stop"]),class:"w-5 h-5",key:e,style:n({backgroundColor:d.value.patternList.includes(e)?d.value.patternColor:d.value.cardColor})},null,12,S)))),128))],4)]))}}),[["__scopeId","data-v-be6d21c1"]]),R={class:"modal-box"},j={class:"modal-action"},A={method:"dialog",class:"flex gap-3"},D={class:"mb-8"},I={class:"flex flex-row items-center w-full gap-24 mb-10 form-control"},N={class:""},F={class:"flex flex-row items-center w-full gap-24 mb-10 form-control"},O={class:""},q={class:"help"},B={key:0,class:"text-sm text-red-400 help-text"},E={class:"tooltip","data-tip":"该项比较耗费时间和性能"},H=["disabled"],M={class:"loading loading-ring loading-md"},G={class:"w-full max-w-xs form-control"},J=["value"],K={class:"w-full max-w-xs form-control"},Q={class:"w-full max-w-xs form-control"},W={class:"w-full max-w-xs form-control"},X={class:"flex flex-row w-full max-w-xs gap-10 mb-10 form-control"},Y={class:"w-full max-w-xs mb-10 form-control"},Z={class:"w-full max-w-xs form-control"},$={class:"flex flex-row items-center w-full gap-24 mb-0 form-control"},ee={class:"h-auto"},le={class:"flex w-full h-24 gap-3 m-0"},ae={class:"w-full max-w-xs mb-10 form-control"},te=["checked"],oe=e({__name:"FaceConfig",setup(e){const l=P().globalConfig,n=P().personConfig,V=P().prizeConfig,{getTopTitle:U,getTheme:S,getPatterColor:oe,getPatternList:se,getCardColor:re,getLuckyColor:ue,getTextColor:ne,getCardSize:ce,getTextSize:de,getRowCount:ie,getIsShowPrizeList:pe}=c(l),{getAlreadyPersonList:ve,getNotPersonList:me}=c(n),be=d(),fe=d(),Ce=d(0),we=d(S.value.name),xe=d(structuredClone(U.value)),he=d(structuredClone(re.value)),ge=d(structuredClone(ue.value)),ye=d(structuredClone(ne.value)),ke=d(structuredClone(ce.value)),Le=d(structuredClone(de.value)),Ve=d(structuredClone(ie.value)),Pe=d(structuredClone(pe.value)),_e=d(structuredClone(oe.value)),Te=d(Object.keys(k)),Ue=d(k),Se=d({rowCount:Ve}),ze=d({rowCount:""}),Re=i.object({rowCount:i.number({required_error:"必填项",invalid_type_error:"必须填入数字"}).min(1,"最小为1").max(100,"最大为100")}),je={rowCount:Se.value.rowCount},Ae=()=>{Ce.value=2,setTimeout((()=>{const e=ve.value.length,l=me.value.length;if(e<=0&&l<=0)return;const a=ve.value.concat(me.value),t=a.slice(0,e),o=a.slice(e,l+e);n.deleteAllPerson(),n.addNotPersonList(o),n.addAlreadyPersonList(t,null),Ce.value=0}),1e3)},De=()=>{l.setPatternList([])},Ie=()=>{l.resetPatternList()},Ne=()=>{l.reset(),n.reset(),V.resetDefault(),window.location.reload()};return p((()=>Se.value.rowCount),(()=>{var e;je.rowCount=Se.value.rowCount,(e=je,Re.parseAsync(e)).then((e=>{e.rowCount&&(Ce.value=1,l.setRowCount(e.rowCount))})).catch((e=>{ze.value.rowCount=e.issues[0].message}))})),p(xe,(e=>{l.setTopTitle(e)})),p(we,(e=>{const a=Ue.value[e];l.setTheme({name:e,detail:a}),L.themeChange(e),a.primary&&(_(a.primary)||T(a.primary))&&l.setCardColor(a.primary)}),{deep:!0}),p(he,(e=>{l.setCardColor(e)}),{deep:!0}),p(ge,(e=>{l.setLuckyCardColor(e)}),{deep:!0}),p(_e,(e=>{l.setPatterColor(e)})),p(ye,(e=>{l.setTextColor(e)}),{deep:!0}),p(ke,(e=>{l.setCardSize(e)}),{deep:!0}),p(Pe,(()=>{l.setIsShowPrizeList(Pe.value)})),v((()=>{})),(e,l)=>(a(),t(s,null,[o("dialog",{id:"my_modal_1",ref_key:"resetDataDialogRef",ref:fe,class:"border-none modal"},[o("div",R,[l[17]||(l[17]=o("h3",{class:"text-lg font-bold"},"提示!",-1)),l[18]||(l[18]=o("p",{class:"py-4"},"该操作会重置所有数据，是否继续？",-1)),o("div",j,[o("form",A,[o("button",{class:"btn",onClick:l[0]||(l[0]=e=>fe.value.close())},"取消"),o("button",{class:"btn",onClick:Ne},"确定")])])])],512),o("div",null,[l[35]||(l[35]=o("h2",null,"全局配置",-1)),o("div",D,[o("button",{class:"btn btn-sm btn-primary",onClick:l[1]||(l[1]=e=>fe.value.showModal())},"重置所有数据")]),o("label",I,[o("div",N,[l[19]||(l[19]=o("div",{class:"label"},[o("span",{class:"label-text"},"标题")],-1)),m(o("input",{type:"text","onUpdate:modelValue":l[2]||(l[2]=e=>xe.value=e),placeholder:"输入标题",class:"w-full max-w-xs input input-bordered"},null,512),[[b,xe.value]])])]),o("label",F,[o("div",O,[l[20]||(l[20]=o("div",{class:"label"},[o("span",{class:"label-text"},"列数")],-1)),m(o("input",{type:"number","onUpdate:modelValue":l[3]||(l[3]=e=>Se.value.rowCount=e),placeholder:"Type here",class:"w-full max-w-xs input input-bordered"},null,512),[[b,Se.value.rowCount]]),o("div",q,[ze.value.rowCount?(a(),t("span",B,f(ze.value.rowCount),1)):C("",!0)])]),o("div",null,[o("div",E,[o("button",{class:"mt-5 btn btn-info btn-sm",disabled:1!=Ce.value,onClick:Ae},[l[21]||(l[21]=o("span",null,"重设布局",-1)),m(o("span",M,null,512),[[w,2==Ce.value]])],8,H)])])]),o("label",G,[l[23]||(l[23]=o("div",{class:"label"},[o("span",{class:"label-text"},"选择主题")],-1)),m(o("select",{"data-choose-theme":"",class:"w-full max-w-xs border-solid select border-1","onUpdate:modelValue":l[4]||(l[4]=e=>we.value=e)},[l[22]||(l[22]=o("option",{disabled:"",selected:""},"选取主题",-1)),(a(!0),t(s,null,r(Te.value,((e,l)=>(a(),t("option",{key:l,value:e},f(e),9,J)))),128))],512),[[x,we.value]])]),o("label",K,[l[24]||(l[24]=o("div",{class:"label"},[o("span",{class:"label-text"},"卡片颜色")],-1)),h(g(y),{ref_key:"colorPickerRef",ref:be,modelValue:he.value,"onUpdate:modelValue":l[5]||(l[5]=e=>he.value=e),"pure-color":he.value,"onUpdate:pureColor":l[6]||(l[6]=e=>he.value=e)},null,8,["modelValue","pure-color"])]),o("label",Q,[l[25]||(l[25]=o("div",{class:"label"},[o("span",{class:"label-text"},"中奖卡片颜色")],-1)),h(g(y),{ref_key:"colorPickerRef",ref:be,modelValue:ge.value,"onUpdate:modelValue":l[7]||(l[7]=e=>ge.value=e),"pure-color":ge.value,"onUpdate:pureColor":l[8]||(l[8]=e=>ge.value=e)},null,8,["modelValue","pure-color"])]),o("label",W,[l[26]||(l[26]=o("div",{class:"label"},[o("span",{class:"label-text"},"文字颜色")],-1)),h(g(y),{ref_key:"colorPickerRef",ref:be,modelValue:ye.value,"onUpdate:modelValue":l[9]||(l[9]=e=>ye.value=e),"pure-color":ye.value,"onUpdate:pureColor":l[10]||(l[10]=e=>ye.value=e)},null,8,["modelValue","pure-color"])]),o("label",X,[o("div",null,[l[27]||(l[27]=o("div",{class:"label"},[o("span",{class:"label-text"},"卡片宽度")],-1)),m(o("input",{type:"number","onUpdate:modelValue":l[11]||(l[11]=e=>ke.value.width=e),placeholder:"Type here",class:"w-full max-w-xs input input-bordered"},null,512),[[b,ke.value.width]])]),o("div",null,[l[28]||(l[28]=o("div",{class:"label"},[o("span",{class:"label-text"},"卡片高度")],-1)),m(o("input",{type:"number","onUpdate:modelValue":l[12]||(l[12]=e=>ke.value.height=e),placeholder:"Type here",class:"w-full max-w-xs input input-bordered"},null,512),[[b,ke.value.height]])])]),o("label",Y,[l[29]||(l[29]=o("div",{class:"label"},[o("span",{class:"label-text"},"文字大小")],-1)),m(o("input",{type:"number","onUpdate:modelValue":l[13]||(l[13]=e=>Le.value=e),placeholder:"Type here",class:"w-full max-w-xs input input-bordered"},null,512),[[b,Le.value]])]),o("label",Z,[l[30]||(l[30]=o("div",{class:"label"},[o("span",{class:"label-text"},"高亮颜色")],-1)),h(g(y),{ref_key:"colorPickerRef",ref:be,modelValue:_e.value,"onUpdate:modelValue":l[14]||(l[14]=e=>_e.value=e),"pure-color":_e.value,"onUpdate:pureColor":l[15]||(l[15]=e=>_e.value=e)},null,8,["modelValue","pure-color"])]),o("label",$,[o("div",null,[l[31]||(l[31]=o("div",{class:"label"},[o("span",{class:"label-text"},"图案设置")],-1)),o("div",ee,[h(z,{rowCount:g(ie),cardColor:g(re),patternColor:g(oe),patternList:g(se)},null,8,["rowCount","cardColor","patternColor","patternList"])])])]),o("div",le,[o("button",{class:"mt-5 btn btn-info btn-sm",onClick:u(De,["stop"])},l[32]||(l[32]=[o("span",null,"清空图案设置",-1)])),o("div",{class:"tooltip","data-tip":"默认图案设置针对17列时有效，其他列数请自行设置"},[o("button",{class:"mt-5 btn btn-info btn-sm",onClick:Ie},l[33]||(l[33]=[o("span",null,"默认图案设置",-1)]))])]),o("label",ae,[l[34]||(l[34]=o("div",{class:"label"},[o("span",{class:"label-text"},"是否常显奖品列表")],-1)),o("input",{type:"checkbox",checked:Pe.value,onChange:l[16]||(l[16]=e=>Pe.value=!Pe.value),class:"mt-2 border-solid checkbox checkbox-secondary border-1"},null,40,te)])])],64))}});export{oe as default};
